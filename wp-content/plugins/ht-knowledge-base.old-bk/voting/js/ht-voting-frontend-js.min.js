jQuery(document).ready(function(a){"use strict";function b(){a(".ht-voting-links a").each(function(e){var f=a(this),g=f.hasClass("enabled"),h=f.attr("data-direction"),i=f.attr("data-type"),j=f.attr("data-nonce"),k=f.attr("data-id"),l=f.attr("data-allow"),m=f.attr("data-display");f.click(function(e){if(e.preventDefault(),!g){var f=a(".voting-login-required").attr("data-ht-voting-must-log-in-msg");return void alert(f)}var n={action:"ht_voting",direction:h,type:i,nonce:j,id:k,allow:l,display:m};a.post(voting.ajaxurl,n,function(e){""!==e&&("post"==i?(a("#ht-voting-post-"+k).replaceWith(e),d("#ht-voting-post-"+k)):"comment"==i&&(a("#ht-voting-comment-"+k).slideUp(100),a("#ht-voting-comment-"+k).replaceWith(e),a("#ht-voting-comment-"+k).slideDown(1e3)),b(),c())})})})}function c(){a(".ht-voting-comment").each(function(b){var c=a(this),d=c.attr("data-vote-key"),e=c.hasClass("enabled"),f=c.attr("data-nonce"),g=c.attr("data-id"),h=c.children("button");h.click(function(b){c.slideUp(100);var h=c.children("textarea").val();if(b.preventDefault(),!e){var i=a(".voting-login-required").attr("data-ht-voting-must-log-in-msg");return void alert(i)}var j={action:"ht_voting_update_feedback",key:d,nonce:f,comment:h,id:g};a.post(voting.ajaxurl,j,function(a){""!==a&&c.html(a),c.slideDown(1e3)})})})}function d(b){var c=a(b),d=c.find(".ht-voting-comment").first();d.hide(),d.slideDown(1e3,function(){d.find("textarea").focus()})}b(),window.globalEnablePostVoting=function(){b()}});