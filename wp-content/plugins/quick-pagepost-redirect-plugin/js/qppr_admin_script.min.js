function qppr_check_file(e){str=e.value.toUpperCase(),suffix=".TXT",-1!==str.indexOf(suffix,str.length-suffix.length)||(alert(qpprData.msgFileType),e.value="")}function qppr_goOnConfirm(e,r){confirm(e)&&(document.location.href=qpprData.adminURL+r)}!function(e,r,t){e(r).ready(function(){e("span.qppr_meta_help").css("display","none"),e(".inside").on({mouseenter:function(){e(this).find("span.qppr_meta_help").css("display","inline")},mouseleave:function(){e(this).find("span.qppr_meta_help").css("display","none")}},"span.qppr_meta_help_wrap"),t.ajaxurl,e("#pprredirect_type").on("change",function(r){r.preventDefault(),e(".qppr-meta-section-wrapper").removeClass("meta-selected meta-not-selected"),"meta"==e(this).val()?e(".qppr-meta-section-wrapper").slideDown("slow"):e(".qppr-meta-section-wrapper").slideUp("slow")}),e(".qppr-delete-everything").on("click",function(p){if(p.preventDefault(),confirm(t.msgAllDeleteConfirm)){var i={action:"qppr_delete_all_settings",security:t.securityDelete};e.post(t.ajaxurl,i,function(e){"success"==e?r.location.href=t.adminURL+"?page=redirect-options&update=6":r.location.href=t.adminURL+"?page=redirect-options&update=0"})}}),e(".qppr-delete-regular").on("click",function(p){if(p.preventDefault(),confirm(t.msgIndividualDeleteConfirm)){var i={action:"qppr_delete_all_iredirects",security:t.securityDelete};e.post(t.ajaxurl,i,function(e){"success"==e?r.location.href=t.adminURL+"?page=redirect-options&update=2":r.location.href=t.adminURL+"?page=redirect-options&update=0"})}}),e(".qppr-delete-quick").on("click",function(p){if(p.preventDefault(),confirm(t.msgQuickDeleteConfirm)){var i={action:"qppr_delete_all_qredirects",security:t.securityDelete};e.post(t.ajaxurl,i,function(e){"success"==e?r.location.href=t.adminURL+"?page=redirect-options&update=3":r.location.href=t.adminURL+"?page=redirect-options&update=0"})}}),e("#qppr_quick_save_form").on("submit",function(r){e(this);var p=e('input[name^="quickppr_redirects[request]"'),i=e('input[name^="quickppr_redirects[destination]"'),n=!1;return""==p[0].value&&""==i[0].value&&(n=!0),!n||(r.preventDefault(),alert(t.error),!1)}),e("#qppr_quick_save_form").delegate(".delete-qppr","click",function(r){r.preventDefault();var p=e(this).data("rowid"),i={action:"qppr_delete_quick_redirect",request:e("#"+p).children(".table-qppr-req").children(".qppr-request").text(),security:t.security},n=1;confirm(t.msgDeleteConfirm)&&e.post(t.ajaxurl,i,function(r){e("#"+p).remove()}).done(function(){e(".qppr-count-row").each(function(r){e(this).text(n+"."),n++})})}),e(".edit-qppr").click(function(r){r.preventDefault();var t=e(this).data("rowid"),p=e("#"+t),i=e("#qppr-edit-row-holder").children("td");e("#"+t+" td").addClass("editing"),p.addClass("editing-redirect"),i.clone().prependTo(p);var n="X"==p.children(".table-qppr-nwn.editing").children(".qppr-newindow").text(),a="X"==p.children(".table-qppr-nfl.editing").children(".qppr-nofollow").text();p.children(".table-qppr-req.cloned").children(".input-qppr-req").attr("value",p.children(".table-qppr-req.editing").children(".qppr-request").text()),p.children(".table-qppr-des.cloned").children(".input-qppr-dest").attr("value",p.children(".table-qppr-des.editing").children(".qppr-destination").text()),p.children(".table-qppr-nwn.cloned").children(".input-qppr-neww").prop("checked",n),p.children(".table-qppr-nfl.cloned").children(".input-qppr-nofo").prop("checked",a),p.children(".table-qppr-sav.cloned").children(".table-qppr-sav span").attr("data-rowid",t),p.children(".table-qppr-can.cloned").children(".table-qppr-can span").attr("data-rowid",t)}),e(".qppr_quick_redirects_wrapper").delegate(".table-qppr-sav span.qpprfont-save","hover",function(r){0==e(".active-saving").length||e(this).parent().parent().hasClass("active-saving")||e(this).css({cursor:"no-drop",color:"#ff0000"})}),e(".qppr_quick_redirects_wrapper").delegate(".table-qppr-sav span.qpprfont-save","click",function(r){if(r.preventDefault(),0!=e(".active-saving").length&&!e(this).parent().parent().hasClass("active-saving"))return!1;var p=e("#"+e(this).data("rowid")),i=e(this).data("rowid"),n=p.children(".table-qppr-req.editing").children(".qppr-request").data("qppr-orig-url"),a=p.children(".table-qppr-req.cloned").children(".input-qppr-req").val(),c=p.children(".table-qppr-des.cloned").children(".input-qppr-dest").val(),l=p.children(".table-qppr-nwn.cloned").children(".input-qppr-neww:checked").val(),d=p.children(".table-qppr-nfl.cloned").children(".input-qppr-nofo:checked").val();l=void 0===l||"undefined"==l?0:l,d=void 0===d||"undefined"==d?0:d,p.children(".cloned").remove();var o=t.protocols,s="/"==a.substring(0,1),u="",q=-1;s||(q=a.indexOf(":"),u=a.substring(0,q)),s||-1!==e.inArray(u,o)||(a="/"+a),e("#qppr-edit-row-saving .qppr-saving-row").clone().prependTo("#"+i),p.addClass("active-saving");var f={action:"qppr_save_quick_redirect",row:i.replace("rowpprdel-",""),original:n,request:a,destination:c,newwin:l,nofollow:d,security:t.security};e.post(t.ajaxurl,f,function(r){var i=0;if("error"==r&&(alert(t.msgErrorSave),i=1),"duplicate"==r){alert(t.msgDuplicate);var o="#"+e(".table-qppr-req:contains("+a+")").parent("tr").attr("id");e(o).addClass("qppr-duplicate"),i=1}1!=i&&(d=1==d?"X":"",l=1==l?"X":"",p.children(".table-qppr-req.editing").children(".qppr-request").text(a),p.children(".table-qppr-des.editing").children(".qppr-destination").text(c),p.children(".table-qppr-nfl.editing").children(".qppr-nofollow").text(d),p.children(".table-qppr-nwn.editing").children(".qppr-newindow").text(l),p.children(".table-qppr-req.editing").children(".qppr-request").data("qppr-orig-url",n)),p.children("td").removeClass("editing"),p.children(".qppr-saving-row").remove()}).done(function(){p.removeClass("editing-redirect active-saving"),e(".table-qppr-sav span.qpprfont-save").css({cursor:"",color:""})})}),e('tr[id^="rowpprdel"]').on("hover",function(){e(this).removeClass("qppr-duplicate")}),e(".qppr_quick_redirects_wrapper").delegate(".table-qppr-can span.qpprfont-cancel","click",function(r){r.preventDefault();var t=e("#"+e(this).data("rowid"));t.children(".cloned").remove(),t.children("td").removeClass("editing"),t.removeClass("editing-redirect")}),e("#hidepprjqmessage").click(function(r){r.preventDefault();var p={action:"qppr_pprhidemessage_ajax",pprhidemessage:1,scid:t.security};e.post(t.ajaxurl,p,function(r){e("#usejqpprmessage").remove()}).done(function(){})}),e("#hidepprjqmessage2").click(function(r){r.preventDefault();var p={action:"qppr_pprhidemessage_ajax",pprhidemessage:2,scid:t.security};e.post(t.ajaxurl,p,function(r){e("#usejqpprmessage2").remove()}).done(function(){})}),e("#qppr-import-quick-redirects-button").click(function(r){r.preventDefault(),e("#qppr_addto_form").css({display:"none"}),"block"==e("#qppr_import_form").css("display")?e("#qppr_import_form").css({display:"none"}):e("#qppr_import_form").css({display:"block"})}),e("#qppr_addto_qr_button").click(function(r){e("#qppr_import_form").css({display:"none"}),"block"==e("#qppr_addto_form").css("display")?e("#qppr_addto_form").css({display:"none"}):e("#qppr_addto_form").css({display:"block"}),r.preventDefault()}),e("#import_redirects_add_qppr").click(function(r){if(""==e("[name|=qppr_file_add]").attr("value"))return r.preventDefault(),alert(t.msgSelect),!1}),e("#import-quick-redrects-file").click(function(r){if(""==e("[name|=qppr_file]").attr("value"))return r.preventDefault(),alert(t.msgSelect),!1})})}(jQuery,document,qpprData);